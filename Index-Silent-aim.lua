if not game:IsLoaded() then
    game.Loaded:Wait(); 
end

function GetClosestPlayer()
    
   local closestPlayer = nil
   local closestAimDistance = 50
    
   for i,v in pairs(game.Players:GetPlayers()) do
       if v ~= game.Players.LocalPlayer and v.Character and v.Character.HumanoidRootPart and v.Character.Humanoid.Health > 0 then
           local distance = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - v.Character.HumanoidRootPart.Position).magnitude
           if distance < closestAimDistance then
               closestAimDistance = distance
               closestPlayer = v
           end
       end
   end
   return closestPlayer
end

local velocityPrediction = 5
local oldIndex = nil

oldIndex = hookmetamethod(game, "__index", function(self, Index)
    if self:IsA("Mouse") and Index == "Hit" and not checkcaller() then
        return (Index == "Hit" and GetClosestPlayer().Character.HumanoidRootPart.CFrame + GetClosestPlayer().Character.HumanoidRootPart.Velocity / velocityPrediction)
    end
    return oldIndex(self, Index)
end)
