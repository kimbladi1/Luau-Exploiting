--> The following code that I made is only compatible for 1v1 court and 2v2 half court [Adding support for all full court's soon]

if not game:IsLoaded() then
	game.Loaded:Wait();
end

if getgenv().ExecCheck then -- > no need but yes
	game:GetService("StarterGui"):SetCore("SendNotification", {
		Title = "Execution Error",
		Text = "This script has already been executed"
	})
	return 
end

getgenv().ExecCheck = true


-- > Incoming ugly Gui to Lua code 
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local inRang3 = Instance.new("TextLabel")
local outOfRang3 = Instance.new("TextLabel")

ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(74, 74, 74)
Frame.BorderSizePixel = 2
Frame.Visible = true 
Frame.Position = UDim2.new(0.449462175, 0, 0.0139563363, 0)
Frame.Size = UDim2.new(0, 196, 0, 58)

inRang3.Name = "inRang3"
inRang3.Parent = Frame
inRang3.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
inRang3.BackgroundTransparency = 1.000
inRang3.Position = UDim2.new(0.0783672705, 0, 0.194137976, 0)
inRang3.Size = UDim2.new(0, 166, 0, 35)
inRang3.Visible = false
inRang3.Font = Enum.Font.GothamSemibold
inRang3.Text = "In Range"
inRang3.TextColor3 = Color3.fromRGB(0, 255, 38)
inRang3.TextScaled = true
inRang3.TextSize = 18.000
inRang3.TextStrokeTransparency = -0.010
inRang3.TextWrapped = true

outOfRang3.Name = "outOfRang3"
outOfRang3.Parent = Frame
outOfRang3.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
outOfRang3.BackgroundTransparency = 1.000
outOfRang3.Position = UDim2.new(0.0783672705, 0, 0.194137976, 0)
outOfRang3.Size = UDim2.new(0, 166, 0, 35)
outOfRang3.Visible = false
outOfRang3.Font = Enum.Font.GothamSemibold
outOfRang3.Text = "Out of Range"
outOfRang3.TextColor3 = Color3.fromRGB(255, 0, 0)
outOfRang3.TextScaled = true
outOfRang3.TextSize = 18.000
outOfRang3.TextStrokeTransparency = 0.000
outOfRang3.TextWrapped = true


-- > Variables
local Workspace = game:GetService("Workspace")
local UserInputService = game:GetService("UserInputService")

local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait();


local TabInstanceParenting = function() -- > Re-parenting to get better performance and easily reachable
	local RimName = "ReparentedRim"

	for i,v in pairs(Workspace["_Game"]["_Courts"]["_Courts [1v1]"]:GetDescendants()) do
		if v.Name == "Rim" then
			v.Parent = Workspace
			v.Name = "ReparentedRim"
		end
	end 

	for i,v in pairs(Workspace["_Game"]["_Courts"]["_Courts [2v2]"]:GetDescendants()) do
		if v.Name == "Rim" then
			v.Parent = Workspace
			v.Name = "ReparentedRim"
		end
	end
	
	for i,v in pairs(Workspace["_Practice"]:GetDescendants()) do
		if v.Name == "Rim" then
			v.Parent = Workspace
			v.Name = "ReparentedRim"
		end
	end
end

task.spawn(TabInstanceParenting) -- Call function

local FindClosestPart = function(position: Vector3?) -- > Finding closest Ball Object
    local Closest, ClosestPart, Distance
    
    for i,v in pairs(Workspace:GetChildren()) do
        if v.Name == "ReparentedRim" then
            if Closest then	
                Distance = (position - v.Position).Magnitude

                if Distance < ClosestPart then
                    Closest = v
                    ClosestPart = Distance
                end
            else 			           
                Closest = v
                ClosestPart = (position - v.Position).Magnitude
            end
        end
    end
    return Closest
end

local DistanceComparison = function() -- > Compare function 
	local ClosestRimPosition = FindClosestPart(Character.HumanoidRootPart.Position) 

	if Character and Character.HumanoidRootPart then
		return (ClosestRimPosition.Position - Character.HumanoidRootPart.Position).Magnitude
	end
end

UserInputService.InputBegan:Connect(function(Input: Instance?, gameProcessed: Boolean?) -- > Fire server, Modify arguments etc
	if not gameProcessed and Input.KeyCode == Enum.KeyCode.Space and Character:FindFirstChild("Ball") then	

		Shooting = true

		local FindClosest = FindClosestPart(Character.HumanoidRootPart.Position).Position

		local Argument1 = FindClosest + Vector3.new(0, 50, 0)
		local Argument2 = 85

		repeat task.wait(0.1)			

			Workspace[Player.Name].Ball.shoot:FireServer(Argument1, Argument2)

		until Shooting == false
	end
end)

UserInputService.InputEnded:Connect(function(Input: Instance?, gameProcessed: Boolean?) -- > Reset Shooting var
	if not gameProcessed and Input.KeyCode == Enum.KeyCode.Space then
		Shooting = false
	end
end)

task.spawn(function() -- > This is ugly but has to be done to show wether you're out of the silent aim's reach or not 
	while task.wait() do
		if Character:FindFirstChild("Ball") then

			if DistanceComparison() > 50.2 and DistanceComparison() < 54.4 then
				inRang3.Visible = true
				outOfRang3.Visible = false 
			else
				inRang3.Visible = false
				outOfRang3.Visible = true
			end
		end
	end
end)

game:GetService("StarterGui"):SetCore("SendNotification", { -- > script do the funi
	Title = "Script Executed",
	Text = "Game : Hoop Paradise ; Produced by : sinkZ#6982 [NOTE : script is not fully finished!"
})
