 if not game:IsLoaded() then
	game.Loaded:Wait();
end

if getgenv().ExecCheck then
	game:GetService("StarterGui"):SetCore("SendNotification", {
		Title = "Execution Error",
		Text = "This script has already been executed"
	})
	return 
end

getgenv().ExecCheck = true


-- > Incoming ugly Gui to Lua code 
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local InRange = Instance.new("TextLabel")
local OutOfRange = Instance.new("TextLabel")

ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(74, 74, 74)
Frame.BorderSizePixel = 2
Frame.Visible = true 
Frame.Position = UDim2.new(0.449462175, 0, 0.0139563363, 0)
Frame.Size = UDim2.new(0, 196, 0, 58)

InRange.Name = "InRange"
InRange.Parent = Frame
InRange.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
InRange.BackgroundTransparency = 1.000
InRange.Position = UDim2.new(0.0783672705, 0, 0.194137976, 0)
InRange.Size = UDim2.new(0, 166, 0, 35)
InRange.Visible = false
InRange.Font = Enum.Font.GothamSemibold
InRange.Text = "In Range"
InRange.TextColor3 = Color3.fromRGB(0, 255, 38)
InRange.TextScaled = true
InRange.TextSize = 18.000
InRange.TextStrokeTransparency = -0.010
InRange.TextWrapped = true

OutOfRange.Name = "OutOfRange"
OutOfRange.Parent = Frame
OutOfRange.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
OutOfRange.BackgroundTransparency = 1.000
OutOfRange.Position = UDim2.new(0.0783672705, 0, 0.194137976, 0)
OutOfRange.Size = UDim2.new(0, 166, 0, 35)
OutOfRange.Visible = false
OutOfRange.Font = Enum.Font.GothamSemibold
OutOfRange.Text = "Out of Range"
OutOfRange.TextColor3 = Color3.fromRGB(255, 0, 0)
OutOfRange.TextScaled = true
OutOfRange.TextSize = 18.000
OutOfRange.TextStrokeTransparency = 0.000
OutOfRange.TextWrapped = true


-- > Variables
local Workspace = game:GetService("Workspace")
local UserInputService = game:GetService("UserInputService")


local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait();


local TabInstanceParenting = function() -- > Easier to reach and better Performance wise
	local RimName = "ReparentedRim"

	for i,v in pairs(Workspace["_Game"]["_Courts"]["_Courts [1v1]"]:GetDescendants()) do
		if v.Name == "Rim" then
			v.Parent = Workspace
			v.Name = "ReparentedRim"
		end
	end 

	for i,v in pairs(Workspace["_Game"]["_Courts"]["_Courts [2v2]"]:GetDescendants()) do
		if v.Name == "Rim" then
			v.Parent = Workspace
			v.Name = "ReparentedRim"
		end
	end
	
	for i,v in pairs(Workspace["_Practice"]:GetDescendants()) do
		if v.Name == "Rim" then
			v.Parent = Workspace
			v.Name = "ReparentedRim"
		end
	end
end
task.spawn(TabInstanceParenting) -- Call function


local FindClosestPart = function(position: Vector3?)
    local Closest, ClosestPart, Distance
    
    for i,v in pairs(Workspace:GetChildren()) do
        if v.Name == "ReparentedRim" then
            if Closest then	
                Distance = (position - v.Position).Magnitude

                if Distance < ClosestPart then
                    Closest = v
                    ClosestPart = Distance
                end
            else 			           
                Closest = v
                ClosestPart = (position - v.Position).Magnitude
            end
		end
    end
    return Closest
end


local DistanceComparison = function()
	local ClosestRimPosition = FindClosestPart(Character.HumanoidRootPart.Position) 

	if Character and Character.HumanoidRootPart then
		return (ClosestRimPosition.Position - Character.HumanoidRootPart.Position).Magnitude
	end
end

UserInputService.InputBegan:Connect(function(Input: Instance?, gameProcessed: Boolean?) -- > Fire server, Modify arguments etc
	if not gameProcessed and Input.KeyCode == Enum.KeyCode.Space and Character:FindFirstChild("Ball") then	

		Shooting = true

		local FindClosest = FindClosestPart(Character.HumanoidRootPart.Position).Position

		local Argument1 = FindClosest + Vector3.new(0, 50, 0) -- > check ()
		local Argument2 = 85

		repeat task.wait(0.1)			

			Workspace[Player.Name].Ball.shoot:FireServer(Argument1, Argument2)

		until Shooting == false
	end
end)

UserInputService.InputEnded:Connect(function(Input: Instance?, gameProcessed: Boolean?) -- > Reset Shooting var
	if not gameProcessed and Input.KeyCode == Enum.KeyCode.Space then
		Shooting = false
	end
end)

task.spawn(function()
	while task.wait() do
		if Character:FindFirstChild("Ball") then

			if DistanceComparison() > 50.2 and DistanceComparison() < 54.4 then
				InRange.Visible = true
				OutOfRange.Visible = false 
			else
				InRange.Visible = false
				OutOfRange.Visible = true
			end
		end
	end
end)


game:GetService("StarterGui"):SetCore("SendNotification", { -- > script do the funi
	Title = "Script Executed",
	Text = "Script produced by : sinkZ#6982 [NOTE : script is not fully finished!"
})
